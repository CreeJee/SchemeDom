<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>TEST</title>
</head>
<body>
    
</body>
<script type="module">
    import { Component } from "../src/Component.js";
    import { State } from "../src/State.js";
    import { ObserveComponent } from "../src/ObserveComponent.js";
    class MutationComponent extends Component{
        constructor(state){
            super(state)
        }
        render(u,{text}){
            return u("li",{text})
        }
        mutation(state,props){

        }
    }
    let start = performance.now();
    let end = 0;
    const $state = new State({"count":10000});
    const mutatedComp = new MutationComponent();
    class RootComponent extends ObserveComponent{
        constructor($state){
            super($state);
        }
        render(u){
            let renderArray = Array.from({length:$state.get("count")},(v)=>"");
            console.log($state.get("count"))
            return u("ul",{},
                ...renderArray.map((v,i)=>mutatedComp.render(u,{text : i}))
            )
        }
    }
    const root = new RootComponent($state);
    ObserveComponent.mount(
        document.body,
        root
    );
    setTimeout(()=>{
        $state.set({"count" : 10});
        end = performance.now();
        console.log(end-start);
    },
    1000)
    end = performance.now();
    console.log(end-start);
</script>
</html>